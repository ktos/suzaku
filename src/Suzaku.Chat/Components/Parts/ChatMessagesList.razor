@using Suzaku.Chat.Services

@foreach (var item in Messages)
{
	if (!item.BusyMarker)
	{
		<ChatMessage IsMine="@FormatIsMine(item)" Sender="@FormatSender(item)" Timestamp="DateTime.Now" Content="@item.Content"></ChatMessage>
	}
	else
	{
		<BusyMarker Sender="@FormatSender(item)"></BusyMarker>
	}
}

@code {
	[Parameter] public required IEnumerable<Suzaku.Chat.Models.ChatMessage> Messages { get; set; }

	private bool FormatIsMine(Suzaku.Chat.Models.ChatMessage message)
	{
		return message.Sender == Models.User.Human;
	}

	private string FormatSender(Suzaku.Chat.Models.ChatMessage message)
	{
		switch (message.Sender)
		{
			case Models.User.Human:
				return "Ktos";
			case Models.User.Suza:
				return "Suza";
			case Models.User.Saga:
				return "Saga";
			default:
				return message.Sender.ToString();
		}
	}
}
